{% extends "winedora/base_html5.html" %}

{% load static%}

{% block additional_styles %}
<style type="text/css">
  .wine-num-badge {
    height: 220px;
    background-color: #fff;
    border: 1px solid rgb(147,149,152);
    border-radius: 4px;
    -moz-box-shadow: 0px 1px 10px rgb(147,149,152);
    -webkit-box-shadow: 0px 1px 10px rgb(147,149,152);
    box-shadow: 0px 1px 10px rgb(147,149,152);
  }
  .wine-num-badge img {
    margin-top: 33%;
  }
  .span3 > p {
    margin-top: 10px;
  }
  .box-content2 {
    margin-top: 0;
    padding-bottom: 60px;
    height: 147px;
  }
  .side-glass {
    position: absolute;
    margin-left: 100px;
    margin-top: -80px;
  }
  .member-no-personality {
    position: absolute;
    margin-left: -80px;
    margin-top: -40px;
  }
  .member-personality {
    position: absolute;
    margin-left: -80px;
    margin-top: -60px;
    height: 300px;
  }
  .headline.has-personality {
    font-size: 50px;
  }
  .personality-container {
    height: 261px;
  }
  .wine-name {
    height: 65px;
  }
  .Rating-{{ wine_personality.suffix }}-Text-1 {
      background: url('{{ STATIC_URL }}img/ratings/RATED-{{ wine_personality.suffix }}/Rating-{{ wine_personality.suffix }}-Text-1.png') no-repeat 7px;
  }
  .Rating-{{ wine_personality.suffix }}-Text-2 {
      background: url('{{ STATIC_URL }}img/ratings/RATED-{{ wine_personality.suffix }}/Rating-{{ wine_personality.suffix }}-Text-2.png') no-repeat 30px;
  }
  .Rating-{{ wine_personality.suffix }}-Text-3 {
      background: url('{{ STATIC_URL }}img/ratings/RATED-{{ wine_personality.suffix }}/Rating-{{ wine_personality.suffix }}-Text-3.png') no-repeat 28px;
  }
  .Rating-{{ wine_personality.suffix }}-Text-4 {
      background: url('{{ STATIC_URL }}img/ratings/RATED-{{ wine_personality.suffix }}/Rating-{{ wine_personality.suffix }}-Text-4.png') no-repeat 54px;
  }
  .Rating-{{ wine_personality.suffix }}-Text-5 {
      background: url('{{ STATIC_URL }}img/ratings/RATED-{{ wine_personality.suffix }}/Rating-{{ wine_personality.suffix }}-Text-5.png') no-repeat 73px;
  }
  .Rating-{{ wine_personality.suffix }}-Text-6 {
      background: url('{{ STATIC_URL }}img/ratings/RATED-{{ wine_personality.suffix }}/Rating-{{ wine_personality.suffix }}-Text-6.png') no-repeat;
      margin: -140px 45px;
  }
</style>
{% endblock additional_styles %}

{% block header %}
  <h1 class="headline">What did you think?</h1>
{% endblock header %}


{% block content %}

<div class="container" data-spy="scroll" data-offset="50" data-target=".subnav">
  <div class="row">
    <div class="span3">
      <div class="row">
        <div class="span3 center personality-container">
          &nbsp;
          {% if wine_personality %}
            <div class="personality-badge-detail">
              <img class="member-personality" src="{{ STATIC_URL }}img/homepage_badge_{{ wine_personality.suffix }}.png" height="310">
            </div>
          {% else %}
            <div class="personality-badge-detail">
              <img class="member-no-personality" src="{% static "img/homepage_badge_mystery.png" %}" height="310" />
            </div>
          {% endif %}
        </div>
      </div>
      <div class="vertical-space">&nbsp;</div>
      <div class="row">
        <div class="span3">
          <a href="{% url make_host %}">
            <div class="box-content2 make-host">
              <h1>Host a party!</h1>
              <p class="howto-sidetext">
                Pop the cork! <br />Learn about <br />
                hosting <br />a Vinely party. 
              </p>
              <img class="side-glass" src="{{ STATIC_URL }}img/make_host_sidebar_glass.png">
            </div>
            <div class="vertical-space"></div>
          </a>
        </div>
      </div>
    </div>
    <div class="span9">
      <div class="row">
      {% for wine_number in unrated_wine_numbers %}
        <div class="span3 center">
          <a href="{% url member_rate_wines wine_number %}">
            <div class="wine-num-badge">
              <img src="{{ STATIC_URL }}img/WINE-BADGE-{{ wine_number }}.png">
            </div>
          </a>
          <p class="wine-name">Tasting Wine {{ wine_number }}</p>
        </div>
      {% endfor %}
      </div>
    </div>
    {% comment %}
    <div class="span3 center">
      <a href="{% if wine_personality %}#{% else %}{% url member_rate_wines 2 %}{% endif %}">
        <div class="wine-num-badge">
          <img src="{{ STATIC_URL }}img/WINE-BADGE-TWO.png">
        </div>
      </a>
      {% if 2 == tasted_wines.1.wine.number %}
        <p>{{tasted_wines.1.wine.name}}</p>
      {% else %}
        <p>Tasting Wine 2</p>
      {% endif %}
    </div>
    <div class="span3 center">
      <a href="{% if wine_personality %}#{% else %}{% url member_rate_wines 3 %}{% endif %}">
        <div class="wine-num-badge">
          <img src="{{ STATIC_URL }}img/WINE-BADGE-THREE.png">
        </div>
      </a>
      {% if 3 == tasted_wines.2.wine.number %}
        <p>{{tasted_wines.2.wine.name}}</p>
      {% else %}
        <p>Tasting Wine 3</p>
      {% endif %}
    </div>
    {% endcomment %}

    {% comment %}
    <div class="span3 center">
      <a href="{% if wine_personality %}#{% else %}{% url member_rate_wines 4 %}{% endif %}">
        <div class="wine-num-badge">
          <img src="{{ STATIC_URL }}img/WINE-BADGE-FOUR.png">
        </div>
      </a>
      {% if 4 == tasted_wines.3.wine.number %}
        <p>{{tasted_wines.3.wine.name}}</p>
      {% else %}
        <p>Tasting Wine 4</p>
      {% endif %}
    </div>
    <div class="span3 center">
      <a href="{% if wine_personality %}#{% else %}{% url member_rate_wines 5 %}{% endif %}">
        <div class="wine-num-badge">
          <img src="{{ STATIC_URL }}img/WINE-BADGE-FIVE.png">
        </div>
      </a>
      {% if 5 == tasted_wines.4.wine.number %}
        <p>{{tasted_wines.4.wine.name}}</p>
      {% else %}
        <p>Tasting Wine 5</p>
      {% endif %}
    </div>
    <div class="span3 center">
      <a href="{% if wine_personality %}#{% else %}{% url member_rate_wines 6 %}{% endif %}">
        <div class="wine-num-badge">
          <img src="{{ STATIC_URL }}img/WINE-BADGE-SIX.png">
        </div>
      </a>
      {% if 6 == tasted_wines.5.wine.number %}
        <p>{{tasted_wines.5.wine.name}}</p>
      {% else %}
        <p>Tasting Wine 6</p>
      {% endif %}
    </div>
    {% endcomment %}
  </div>
  <div class="vertical-space">&nbsp;</div>
  {% if rated_wines %}
    <hr />
    <div class="row">
      <div class="span5">
        Wines you've already rated have been integrated into your taste profile to make sure you get wines you're guaranteed to love.
      </div>
      <div class="span2">&nbsp;</div>
      <div class="span1">
        <label>Reds <input class="select-colors" type="checkbox" name="wine_color" value="0" checked="checked" /></label>
      </div>
      <div class="span2">
        <label>Whites <input class="select-colors" type="checkbox" name="wine_color" value="1" checked="checked" /></label>
      </div>
    </div>
    <div class="vertical-space">&nbsp;</div>
    <div class="row">
      {% for selected_wine in rated_wines %}
        <div class="span3 center rated-container" data-color="{{ selected_wine.wine.color }}">
          <div class="wine-num-badge">
            <img src="{{ MEDIA_URL }}{{selected_wine.wine.image}}">
          </div>
          <div class="rated-widget" data-wine="{{ selected_wine.id }}">
            <div class="rated-stars Rated-{{ wine_personality.suffix }}-{{ selected_wine.overall_rating }}"></div>
            <div class="rated-text Rating-{{ wine_personality.suffix }}-Text-{{ selected_wine.overall_rating }} hide"></div>
          </div>
          <p>Wine: {{selected_wine.wine.name}}</p>
          <p>Rating: {{selected_wine.get_overall_rating_display }}</p>
        </div>
      {% endfor %}
    </div>
    <div class="vertical-space">&nbsp;</div>
  {% endif %}

</div>

{% comment %}
{% if wine_personality %}
<div class="container" data-spy="scroll" data-offset="50" data-target=".subnav">
  <h1 class="headline has-personality">Whoops! Our apologies. <br/>You can't rate other wine shipments on this page yet.</h1>
  <section id="rate-instructions">
    <div class="row">
      <div class="span12 center">
        <p>
        It's still important that you rate the wines you have received. Here's three ways to do so:
        </p>
      </div>
    </div>
  </section>

  <div class="row">
    <div class="span4">
      <div class="page-header">
        Email
      </div>
      <p>Take a picture or scan it and email it to <a href="ratings@vinely.com">ratings@vinely.com</a></p>
    </div>
    <div class="span4">
      <div class="page-header">
        Snail mail   
      </div>
        <address>
        Vinely<br>
        One Kendall Square Building 400, B4202<br>
        Cambridge, MA 02139<br>
        </address>
      </p>
    </div>

    <div class="span4">
      <div class="page-header">
      Call
      </div> 
      Talk to one of our Vinely Care Specialists at (888) 294-1128 ext. 1 or <a href="care@vinely.com">email</a> us. 
    </div>

  </div>
  <div class="vertical-space">
    &nbsp;
  </div>
</div>
{% endif %}
{% endcomment %}

{% endblock content %}

{% block additional_scripts %}
  <script type="text/javascript">
    $(document).ready( function () {
      $('.select-colors').click(function() {
        var color = $(this).val();
        // console.log('Color: ' + color);
        if ($(this).prop('checked')) {
          $("[data-color='" + color + "']").show('slow');
        }
        else {
          $("[data-color='" + color + "']").hide('slow');
        }
      });
    });
  </script>
{% endblock additional_scripts %}